# Инструкция по решению merge-конфликтов в Git

При работе в совместных проектах в Git неизбежно возникают ситуации, когда несколько участников одновременно вносят изменения в одни и те же файлы. Эти изменения могут конфликтовать между собой, и Git сообщит вам о необходимости разрешения таких конфликтов. В этой инструкции мы рассмотрим, как правильно и эффективно разрешать merge-конфликты в Git.

## Что такое merge-конфликт?

Merge-конфликт — это ситуация, когда Git не способен автоматически объединить изменения из разных веток, потому что они затрагивают одни и те же строки кода или текстовые файлы. В результате Git останавливает процесс слияния и выдает сообщение об ошибке:

<pre> CONFLICT (content): Merge conflict in имя_файла.txt 
Automatic merge failed; fix conflicts and then commit the result. </pre>

Конфликтующие области отменены в файле и имеют такой вид:

<pre>
<<<<<<< HEAD
Код из текущей ветки
=======
Код из другой ветки
>>>>>>> branch-name </pre>
  
  где:
  
`<<<<<< HEAD`: маркер начала изменений из текущей ветки (вашей локальной);

`=======`: разделяющий маркер;

`>>>>>> branch-name`: маркер начала изменений из другой ветки (например, ветки branch-name).
 
## Почему так бывает?

Сбой в процессе слияния говорит о наличии конфликта между текущей локальной веткой и веткой, с которой выполняется слияние. Это бывает в следующих случаях:

- двое или больше пользователей изменили одну и ту же строку в файле и пытаются смержить изменения в одну и ту же ветку;
- один пользователь удалил файл, а другой его отредактировал, и оба пытаются смержить свои изменения в одну ветку;
- один пользователь удалил строку, а другой ее отредактировал, и оба пытаются смержить свои изменения в одну ветку и т.д.

## Как разрешить merge-конфликт?

Если после выполнения команды `git merge` Git обнаружит конфликты, необходимо выбрать, какие изменения из разных ветвей включить в новую фиксацию. Ниже рассмотрим наиболее распространенные способы решения merge-конфликтов.

### Разрешение merge-конфликтов вручную
1. Запустите `git status`, чтобы узнать, какие файлы имеют конфликты. Откройте эти файлы в текстовом редакторе и просмотрите конфликтные области.

На этом этапе нужно  решить, какие изменения оставить, а какие удалить или объединить вручную. 

Для сравнения изменений между разными версиями вашего репозитория также можно выполнить команду `git diff -U0`.
Команда `git diff -U0` позволяет отобразить только те строки, в которых произошли изменения. 

*Если merge request важен и вам необходимо его принять или отклонить, вы можете попросить другого члена команды оценить и прокомментировать изменения.*

2. После разрешения конфликтов выполните `git add`, чтобы зафиксировать изменения.

3. Затем выполните `git commit`, чтобы создать коммит, который закроет слияние с разрешенными конфликтами.

   > Если вы столкнулись со слишком сложным конфликтом или не уверены в том, как разрешить конфликт, вы можете отменить слияние с помощью команды `git merge --abort` и попробовать слияние ещё раз после разрешения конфликтов.
   
4. Запушьте изменения в основную ветку, используя команду `git push`.

### Создание временной ветки
Этот способ подходит для управления сложными конфликтами, особенно если вы не хотите затрагивать текущую ветку или если необходимо провести более детальное тестирование изменений после разрешения конфликтов. 
> Временная ветка позволяет отложить разрешение конфликта, если на момент принятия изменений по какой-то причине не удаётся в полной мере оценить актуальность или достоверность конфликтующих изменений.

Следуйте шагам ниже, чтобы создать и использовать временную ветку для разрешения merge-конфликтов:

  1. Создайте новую ветку с помощью команды `git checkout -b` и укажите имя для новой ветки.

<pre> git checkout -b temporary_branch 
</pre>

2. Выполните слияние в вашей временной ветке.

<pre>
git merge temporary_branch
</pre>

> Этот метод может вызвать конфликты. Разрешите конфликты в вашей временной ветке, используя текстовый редактор: выбирите  удалите метки конфликтов (<<<<<<<, =======, >>>>>>>) и сохраните изменения.

3. После успешного разрешения конфликтов добавьте изменения в индекс с помощью команды `git add`.
4. Зафиксируйте изменения с помощью комментария: `git commit -m "Resolved merge conflict"`.

5. Завершите процесс слияния с помощью команды `git merge --continue`. Когда функционал будет доделан и оттестирован, можно выполнить merge и слить отдельную ветку обратно с основной. При слиянии этой временной ветки в основную, все её коммиты разом перенесутся из одной в другую.
   
7. Удалите ветку, если ваши изменения были успешно включены в основную ветку и временная ветка больше не нужна.

<pre>
git branch -d temporary_branch </pre>





